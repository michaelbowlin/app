<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script type="text/javascript">



$(document).ready(function(){

	var myObject = {
	  "row": 
	  [
	    {
	      "id": "1",
	      "state": "North America",
	      "river": "South Plate",
	      "parentid" : "300"
	    },
	    {
	      "id": "2",
	      "state": "Colorado",
	      "river": "South Plate",
	      "parentid" : "200"
	    },
	    {
	      "id": "3",
	      "state": "Montana",
	      "river": "Bitterroot",
	      "parentid" : "200"
	    }        
	  ]
	}

	//console.log(myObject.row[1].state)
var builddata = function(){

	var myOb = myObject.row;
	var source = [];
	var items = [];

    // build hierarchical source
	for(var i = 0; i < myOb.length; i++){
		var item = myOb[i];

		var id = item["id"];
		var state = item["state"];
		var river = item["river"];
		var parentid = item["parentid"];

		//console.log(id);
		//console.log(state);
		//console.log(river);
		//console.log(parentid);
		//console.log(state + parentid + " -- Node Id -- " + id + "<br/>");

		// if parentid
		if(items[parentid]) {
			var item = { parentid : parentid, id : id, state : state, river : river };
			//console.log("yoooo" + item)

			if (!items[parentid].items) {
				items[parenid].items = [];
			}
			items[parentid].items[items[parentid].items.length] = item;
			items[id] = item;

		} else {

			items[id] = {  parentid : parentid, id : id, state : state, river : river  };
			source[id] = items[id];

		}
	}
	return source;
}

var source = builddata();
console.log(builddata());

var buildUL = function(parent, items){
	$.each(items, function(){

		if(this.id) {

            // create LI element and append it to the parent element.
			var li = $("<li>" + this.state + "</li>");
			li.appendTo(parent);
            // if there are sub items, call the buildUL function.
            if (this.items && this.items.length > 0) {
            	var ul = $("<ul></ul>");
            	ul.appendTo(li);
            	buildUL(ul, this.items);
            }

		}

	});
}


var ul = $("<ul></ul>");
ul.appendTo(".js-tempjson");
buildUL(ul,source);




});









</script>

<div class="js-tempjson"></div>












